<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="L-Sstyle.css">
  <script src="https://kit.fontawesome.com/a076d05399.js"></script>
  <title>MayurLeather</title>
</head>

<body>
  <nav>
    <div class="logo"><img src="logo.jpeg"></div>
    <ul>
      <li><a href="Hlogin.html">हिन्दी</a></li>
    </ul>
  </nav>
  <div class="wrapper">
    <div class="title-text">
      <div class="title login">
        Login Form
      </div>
      <div class="title signup">
        Signup Form
      </div>
    </div>
    <div class="form-container">
      <div class="slide-controls">
        <input type="radio" name="slide" id="login" checked>
        <input type="radio" name="slide" id="signup">
        <label for="login" class="slide login">LogIn</label>
        <label for="signup" class="slide signup">SignUp</label>
        <div class="slider-tab"></div>
      </div>
      <div class="form-inner">
        <form action="/#" id="loginForm" method="POST" autocomplete="off" class="login">
          <div class="field">
            <input class="email" type="email" placeholder="Email or Mobile No." required>
          </div>
          <div class="field">
            <input class="pass" type="password" placeholder="Password" required>
          </div>
          <div class="pass-link">
            <a href="#">Forgot Password?</a>
          </div>
          <!-- <div class="field btn">
            <div class="btn-layer"></div>
            <input type="submit" value="LogIn">
            <button type="submit" >Login</button>
          </div> -->
          <div><button class="myBtn" >Login</button></div>
          <div class="signup-link">
            Not a member? <a href="">SignUp Now</a>
          </div>
        </form>
        <!-- <form action="#" class="signup">
                <div class="field">
                  <input type="text" placeholder="First Name" required>
                </div>
                <div class="field">
                  <input type="text" placeholder="Last Name" required>
                </div>
                <div class="field">
                  <input type="email" placeholder="Email" required>
                </div>
                <div class="field">
                  <input type="date" placeholder="D.O.B" required>
                </div>
                <div class="field">
                  <input type="number" placeholder="Class" required>
                </div>
                <div class="field">
                  <input type="number" placeholder="Mobile No." required>
                </div>
                <div class="field">
                  <input type="text" placeholder="School Name" required>
                </div>
                <div class="field">
                  <input type="password" placeholder="Password" required>
                </div>
                <div class="field">
                  <input type="password" placeholder="Confirm Password" required>
                </div>
                <div class="field btn">
                  <div class="btn-layer"></div>
                  <input type="submit" value="SignUp">
                  <button id="myBtn" onclick="sendJSON()"></button>
                </div>
              </form> -->
        <form action="/#" id="regForm" method="POST" autocomplete="off" class="signup">
          <div class="user-details">
            <div class="input-box">
              <span class="details">First Name</span>
              <input type="text" placeholder="Enter your First Name" required>
            </div>
            <div class="input-box">
              <span class="details">Last Name</span>
              <input type="text" placeholder="Enter your Last Name" required>
            </div>
            <div class="input-box">
              <span class="details">Email</span>
              <input type="email" placeholder="Enter your email" required>
            </div>
            <div class="input-box">
              <span class="details">Mobile No.</span>
              <input type="tel" maxlength="10" placeholder="Enter your Mobile No." required>
            </div>
            <div class="input-box">
              <span class="details">Class</span>
              <input type="number" min="1" max="12" placeholder="Enter your Class" required>
            </div>
            <div class="input-box">
              <span class="details">Section</span>
              <input type="txt" placeholder="Enter your Class Section" required>
            </div>
            <div class="input-box">
              <span class="details">Roll No.</span>
              <input type="number" placeholder="Enter your Roll No." required>
            </div>
            <div class="input-box">
              <span class="details">School Name</span>
              <input type="txt" placeholder="Enter your School Name" required>
            </div>
            <div class="input-box">
              <span class="details">Password</span>
              <input type="password" placeholder="Enter your password" required>
            </div>
            <div class="input-box">
              <span class="details">Confirm Password</span>
              <input type="password" placeholder="Confirm your password" required>
            </div>
          </div>
          <div><button class="myBtn" >Submit</button></div>
          <!-- <div class="field btn">
            <div class="btn-layer"></div>
            <input type="submit" value="Submit">
            <button>Submit</button>
          </div> -->

        </form>
      </div>
    </div>
  </div>
  <script src="L-Sscript.js"></script>

  <script defer>

document
   .querySelector('#regForm button')
  .addEventListener('click', doReg);
 document
.querySelector('#loginForm button')
   .addEventListener('click', doLogin);

    function doReg(ev) {
      ev.preventDefault();
      console.log('Send a Register request');
      let em = document.querySelector('#regForm .username').value;
      let pass = document.querySelector('#regForm .pass').value;
      let cpass = document.querySelector('#regForm .cpass').value;
      //TODO: Add form validation
      let user = { username: em, password: pass, confirm_password: cpass };
      let endpoint = 'signup/';
      sendData(user, endpoint, signupSuccess);
    }

    function doLogin(ev) {
      ev.preventDefault();
      console.log('Send a login request');
      let em = document.querySelector('#loginForm .email').value;
      let pass = document.querySelector('#loginForm .pass').value;
      //TODO: Add form validation
      let user = { username: em, password: pass };
      let endpoint = 'login/';
      sendData(user, endpoint, loginSuccess);
    }

    function sendData(user, endpoint, callback) {
      let url = `http://127.0.0.1:4000/${endpoint}`;
      let h = new Headers();
      h.append('Content-Type', 'application/json');

      let req = new Request(url, {
        method: 'POST',
        headers: h,
        body: JSON.stringify(user),
      });

      fetch(req).then((response) => {
        if (response.statusCode === 200) {
          return response.json();
        } else {
          throw new Error('Something went wrong');
        }
      })
        .then((responseJson) => {
          callback(responseJson)
        })
        .catch((error) => {
          console.log(error)
          alert("Username or Password is Incorrect");
        });


      // < !--fetch(req) -->
      // < !--        .then(response => response.json())-->
      // < !--        .then(data => {
      //           -->
      // < !--console.log('Success:', data)-->
      // < !--        })-->
      // < !--        .catch((error) => {
      //             -->
      // < !--console.error('Error:', error); -->
      // < !--        }); -->

      // < !--fetch(req)-->
      // < !--            .then((res) => {
      //               -->
      // < !--              if (res.status === 200 || res.status === 201) {
      //                 -->
      // < !--res.json(); -->
      // < !--console.log('1st')-->
      // < !--                } -->
      // < !--                 else {
      //                 return console.log("Error"); -->
      // < !--                 } -->
      // < !--                 })-->
      // < !--            .then((token) => {
      //                   console.log(token)-- >
      // < !--callback(token)
      //                 })-->

      // < !--                 .catch((failure) => {
      //                   -->
      // < !--console.log(failure)-->
      // < !--                  }); -->
      // < !--fetch(req)-->
      // < !--          .then((res) => res.json())-->
      // < !--          .then((data) => {
      //                     -->
      // < !--            //we have a response-->
      // < !--            if ('error' in data) {
      //                       -->
      // < !--              //bad attempt-->
      // < !--failure(data.error); -->
      // < !--            } -->
      // < !--            else {
      //                       -->
      // < !--              //it worked-->
      // < !--callback(data); -->
      // < !--            } -->
      // < !--          })-->
      // < !--          .catch(failure); -->
    }

    function loginSuccess(token) {
      //we have a token so put it in localstorage
      console.log('token', token);
      sessionStorage.setItem('myapp-token', token);
      alert('You are logged in');
    }

    function signupSuccess(data) {
      //user has been registered
      console.log('new user created', data);
      alert('You have been registered');
    }

    function failure(err) {
      alert(err.message);
      console.warn(err.code, err.message);
    }
  </script>
  <!-- FOOTER STARTS HERE -->
  <header>

  </header>
  <footer>
    <div class="main-content">
      <div class="left box">
        <h2>About us</h2>
        <div class="content">
          <p>Lets make Indian learn about their culutral history</p>
          <div class="social">
            <a href="#"><span class="fab fa-facebook-f"></span></a>
            <a href="#"><span class="fab fa-twitter"></span></a>
            <a href="#"><span class="fab fa-instagram"></span></a>
            <a href="#"><span class="fab fa-youtube"></span></a>
          </div>
        </div>
      </div>

      <div class="center box">
        <h2>Address</h2>
        <div class="content">
          <div class="place">
            <span class="fas fa-map-marker-alt"></span>
            <span class="text">Jaipur,Rajasthan</span>
          </div>
          <div class="phone">
            <span class="fas fa-phone-alt"></span>
            <span class="text">+91-0000000000</span>
          </div>
          <div class="email">
            <span class="fas fa-envelope"></span>
            <span class="text">abc@example.com</span>
          </div>
        </div>
      </div>

      <div class="right box">
        <h2>Contact us</h2>
        <div class="content">
          <form action="#">
            <div class="email">
              <div class="text">Email *</div>
              <input type="email" required placeholder="Email">
            </div>
            <div class="msg">
              <div class="text">Message *</div>
              <textarea rows="2" cols="25" required></textarea>
            </div>
            <div class="btncu">
              <button type="submit">Send</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="bottom">
      <center>
        <span class="credit">Created By <a href="https://www.linkedin.com/in/tanmay-jain-a6288a15a/">Tanmay Jain</a> |
        </span>
        <span class="far fa-copyright"></span><span> 2021 All rights reserved.</span>
      </center>
    </div>
  </footer>
  <!-- FOOTER ENDS HERE -->
</body>

</html>